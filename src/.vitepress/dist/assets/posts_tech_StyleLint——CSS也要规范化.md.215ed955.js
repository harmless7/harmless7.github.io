import{_ as s,c as n,o as a,d as l}from"./app.4b9a283d.js";const C=JSON.parse('{"title":"StyleLint——CSS也要规范化","description":"","frontmatter":{"title":"StyleLint——CSS也要规范化","icon":"stylelint","isOriginal":true,"date":"2022-07-27T00:00:00.000Z","category":["学习笔记","技术"],"tag":["前端","工具","css"],"image":"","banner":""},"headers":[{"level":2,"title":"为什么 CSS 也要规范化","slug":"为什么-css-也要规范化","link":"#为什么-css-也要规范化","children":[{"level":3,"title":"顺序？","slug":"顺序","link":"#顺序","children":[]},{"level":3,"title":"reflow 回流？","slug":"reflow-回流","link":"#reflow-回流","children":[]},{"level":3,"title":"我的理解","slug":"我的理解","link":"#我的理解","children":[]}]},{"level":2,"title":"安装","slug":"安装","link":"#安装","children":[]},{"level":2,"title":"检错 & 纠错","slug":"检错-纠错","link":"#检错-纠错","children":[]},{"level":2,"title":"排序扩展","slug":"排序扩展","link":"#排序扩展","children":[]},{"level":2,"title":"如何与 Vue 一同使用？","slug":"如何与-vue-一同使用","link":"#如何与-vue-一同使用","children":[]},{"level":2,"title":"再加上预处理器？","slug":"再加上预处理器","link":"#再加上预处理器","children":[]},{"level":2,"title":"封盘","slug":"封盘","link":"#封盘","children":[]}],"relativePath":"posts/tech/StyleLint——CSS也要规范化.md","lastUpdated":1678177559000}'),e={name:"posts/tech/StyleLint——CSS也要规范化.md"},p=l(`<p>既然 ESLint 都有了，StyleLint 也不能少。</p><h2 id="为什么-css-也要规范化" tabindex="-1">为什么 CSS 也要规范化 <a class="header-anchor" href="#为什么-css-也要规范化" aria-hidden="true">#</a></h2><p>一般来说，因为语法复杂度并不高，CSS 代码不会很乱。</p><p>那么为什还需要一个专门的规范工具呢？</p><p>因为除了格式，<strong>顺序</strong> 同样很重要。</p><h3 id="顺序" tabindex="-1">顺序？ <a class="header-anchor" href="#顺序" aria-hidden="true">#</a></h3><p>是的，CSS 是有一个推荐顺序的。好的顺序不仅易于查看，而且能优化网页加载的性能。</p><p>具体顺序如下：</p><ol><li>定位属性：position display float left top right bottom overflow clear z-index</li><li>自身属性：width height padding border margin background</li><li>文字样式：font-family font-size font-style font-weight font-varient color</li><li>文本属性：text-align vertical-align text-wrap text-transform text-indent text-decoration letter-spacing word-spacing white-space text-overflow</li><li>CSS3 中的新增属性：content box-shadow border-radius transform</li></ol><p>这样可以减少浏览器的 <strong><code>reflow</code>（回流）</strong>，提升渲染 dom 的性能。</p><p>等等...什么是回流？</p><h3 id="reflow-回流" tabindex="-1"><code>reflow</code> 回流？ <a class="header-anchor" href="#reflow-回流" aria-hidden="true">#</a></h3><p>这与浏览器的渲染流程有关。</p><p>（详情可以看 <a href="https://blog.csdn.net/zxl1990_ok/article/details/121364430" target="_blank" rel="noreferrer">浏览器的回流与重绘 (Reflow &amp; Repaint)</a> 这篇文章）</p><p>简单来说就是一个元素改变尺寸、位置之类的属性时，牵一发动全身，浏览器需要重新渲染与其相关的元素，甚至是整个文档。</p><p>另外还有一个概念叫 <strong><code>repaint</code>（重绘）</strong>，指的是修改除位置尺寸属性时，消耗较小的重绘页面的行为。</p><h3 id="我的理解" tabindex="-1">我的理解 <a class="header-anchor" href="#我的理解" aria-hidden="true">#</a></h3><p>将定位属性写在最前面，浏览器读到的时候就直接 回流 了。</p><p>如果不写在最前面，浏览器先处理其他的属性，然后读到定位属性，还是要重新画，这样浪费了性能。</p><p>大概率是不对的，没有找到很易懂的大佬文章。以后加深了对浏览器的理解回来修改这段。</p><h2 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-hidden="true">#</a></h2><p>回到正题，先贴一个官方文档：<a href="https://stylelint.io/" target="_blank" rel="noreferrer">StyleLint 文档</a></p><ol><li><p>安装 <code>StyleLint</code> 以及 <code>stylelint-config-standard</code> （标准配置包）</p><div class="language-base"><button title="Copy Code" class="copy"></button><span class="lang">base</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">pnpm i -D stylelint stylelint-config-standard</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div></li><li><p>在项目根目录下创建 <code>.stylelintrc.json</code> 配置文件</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// .stylelintrc.json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 类似 ESLint，需要在配置文件中声明使用了什么规则包，以下是两个官方包</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// &quot;extends&quot;: &quot;stylelint-config-recommended &quot; // 只避免错误的规则</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">extends</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">stylelint-config-standard</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 推荐，包含了 Google Airbnb 等样式指南</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div></li></ol><p>安装结束。</p><h2 id="检错-纠错" tabindex="-1">检错 &amp; 纠错 <a class="header-anchor" href="#检错-纠错" aria-hidden="true">#</a></h2><p>检错</p><div class="language-base"><button title="Copy Code" class="copy"></button><span class="lang">base</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">npx stylelint &quot;**/*.css&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>纠错</p><div class="language-base"><button title="Copy Code" class="copy"></button><span class="lang">base</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">npx stylelint &quot;**/*.css&quot; --fix</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>当然，你也可以配置一个 npm 命令</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// package.json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">lint:css</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">stylelint **/*.{vue,css,sass,scss,less} --fix</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"></span></code></pre></div><h2 id="排序扩展" tabindex="-1">排序扩展 <a class="header-anchor" href="#排序扩展" aria-hidden="true">#</a></h2><p>基础安装后的 StyleLint 并没有顺序检测功能，需要安装一个扩展：<code>stylelint-order</code>。</p><div class="language-base"><button title="Copy Code" class="copy"></button><span class="lang">base</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">pnpm i stylelint-order -D</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>安装完成后，在 <code>.stylelintrc.json</code> 文件中配置：</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// .stylelintrc.json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">plugins</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">stylelint-order</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>但是不同于 ESLint，这里仅仅配置 <code>plugins</code> 还不够。</p><p>StyleLint 要求添加插件后，在 <code>rules</code> 中配置插件。</p><p><code>stylelint-order</code> 文档里是这么写的：</p><blockquote><p>将 stylelint-order 添加到您的 Stylelint 配置 <code>plugins</code> 数组中，然后将您需要的规则添加到 <code>rules</code> 列表中。 stylelint-order 中的所有规则都需要使用 order 命名空间。</p></blockquote><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// .stylelintrc.json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">plugins</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">stylelint-order</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">rules</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// order/order 指定声明块中内容的顺序</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// 这里指定 自定义属性 放在 CSS 声明 前面</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// 详细见 https://github.com/hudochenkov/stylelint-order/blob/HEAD/rules/order/README.md#examples</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">order/order</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">custom-properties</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">declarations</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// order/properties-order 指定声明块中属性的顺序</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">order/properties-order</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">width</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">height</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// properties-alphabetical-order 指定声明块中，属性的字母顺序</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">properties-alphabetical-order</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>但是我懒，不想自己配排序的规则，那么就只能用个现成的：<code>stylelint-config-recess-order</code></p><p>在 <code>stylelint-order</code> 文档中提到的三个包这个最热，就它了。</p><p><a href="https://www.npmjs.com/package/stylelint-config-recess-order" target="_blank" rel="noreferrer">stylelint-config-recess-order 文档</a></p><div class="language-base"><button title="Copy Code" class="copy"></button><span class="lang">base</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">pnpm i stylelint-config-recess-order -D</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>配置如下：</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// .stylelintrc.json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">extends</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">stylelint-config-recess-order</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">rules</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// 在此处添加和覆盖其它规则</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>你会发现它甚至不需要配置 <code>stylelint-order</code> 的 <code>plugins</code> 即可使用，都已经封装好了。</p><h2 id="如何与-vue-一同使用" tabindex="-1">如何与 Vue 一同使用？ <a class="header-anchor" href="#如何与-vue-一同使用" aria-hidden="true">#</a></h2><p>使用 <code>stylelint-config-html</code> 来添加对 Vue 的支持。</p><p><a href="https://github.com/ota-meshi/stylelint-config-html" target="_blank" rel="noreferrer">stylelint-config-html 文档</a></p><p>安装：</p><div class="language-base"><button title="Copy Code" class="copy"></button><span class="lang">base</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">pnpm install --save-dev postcss-html stylelint-config-html</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>这里需要使用 postcss-html，相关知识等后面再补</p><p>配置：</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// .stylelintrc.json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">extends</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">stylelint-config-html/vue</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="再加上预处理器" tabindex="-1">再加上预处理器？ <a class="header-anchor" href="#再加上预处理器" aria-hidden="true">#</a></h2><p><a href="https://www.npmjs.com/package/stylelint-scss" target="_blank" rel="noreferrer">stylelint-scss 文档</a></p><p>安装：</p><div class="language-base"><button title="Copy Code" class="copy"></button><span class="lang">base</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">pnpm i stylelint-scss</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>配置：</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// .stylelintrc.json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">plugins</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">stylelint-scss</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="封盘" tabindex="-1">封盘 <a class="header-anchor" href="#封盘" aria-hidden="true">#</a></h2><p>写着写着感觉还有很多前置需要补充，暂且搁置。</p>`,64),o=[p];function t(c,r,i,y,D,d){return a(),n("div",null,o)}const h=s(e,[["render",t]]);export{C as __pageData,h as default};
