<!DOCTYPE html>
<html lang="zh" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>《现代Web布局》其二：flex 弹性详解</title>
    <meta name="description" content="harmless_753 个人站点">
    <link rel="preload stylesheet" href="/assets/style.76575dfb.css" as="style">
    <link rel="modulepreload" href="/assets/app.4b9a283d.js">
    <link rel="modulepreload" href="/assets/posts_tech_《现代Web布局》其二：flex 弹性详解.md.b80a0fdc.lean.js">
    
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="harmless-theme" data-v-1fe50f87><header class="nav-bar" data-v-1fe50f87 data-v-e9bb8348><div class="nav-sidebar" data-v-e9bb8348 data-v-6bc0253d><!--[--><div class="item" data-v-6bc0253d><a class="nav-link-item" href="/" data-v-6bc0253d data-v-b039ca2f>🏠 首页 <!----><!----></a><!----></div><div class="item" data-v-6bc0253d><a class="nav-link-item" href="/doc" data-v-6bc0253d data-v-b039ca2f>文档 <!----><!----></a><!----></div><div class="item" data-v-6bc0253d><a class="nav-link-item" href="/page" data-v-6bc0253d data-v-b039ca2f>页面 <!----><!----></a><!----></div><div class="item" data-v-6bc0253d><a class="nav-link-item" href="/nolayout" data-v-6bc0253d data-v-b039ca2f>无布局 <!----><!----></a><!----></div><!--]--></div><div class="nav-sidebar-toggle" data-v-e9bb8348 data-v-06c78936><i data-v-06c78936></i><i data-v-06c78936></i><i data-v-06c78936></i></div><a class="nav-bar-title" href="/" aria-label="企鹅反应堆, back to home" data-v-e9bb8348 data-v-213abafa><div class="logo" data-v-213abafa><img src="/logo.svg" alt="Logo" data-v-213abafa></div> 企鹅反应堆</a><nav class="nav-link" data-v-e9bb8348 data-v-77127884><!--[--><div class="item" data-v-77127884><a class="nav-link-item" href="/" data-v-77127884 data-v-b039ca2f>🏠 首页 <!----><!----></a></div><div class="item" data-v-77127884><a class="nav-link-item" href="/doc" data-v-77127884 data-v-b039ca2f>文档 <!----><!----></a></div><div class="item" data-v-77127884><a class="nav-link-item" href="/page" data-v-77127884 data-v-b039ca2f>页面 <!----><!----></a></div><div class="item" data-v-77127884><a class="nav-link-item" href="/nolayout" data-v-77127884 data-v-b039ca2f>无布局 <!----><!----></a></div><!--]--></nav><div class="nav-theme-tabs" data-v-e9bb8348 data-v-9c96f2c4><div class="tabs-block" style="left: 2px" data-v-9c96f2c4></div><div class="active item" data-v-9c96f2c4><svg width="20" height="20" viewbox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon light" data-v-9c96f2c4><path fill="currentColor" d="M9.99996 3.15217C10.5252 3.15217 10.951 2.72636 10.951 2.20109C10.951 1.67582 10.5252 1.25 9.99996 1.25C9.47469 1.25 9.04887 1.67582 9.04887 2.20109C9.04887 2.72636 9.47469 3.15217 9.99996 3.15217Z"></path><path fill="currentColor" d="M9.99992 4.29348C6.84829 4.29348 4.2934 6.84838 4.2934 10C4.2934 13.1516 6.84829 15.7065 9.99992 15.7065C13.1515 15.7065 15.7064 13.1516 15.7064 10C15.7064 6.84838 13.1515 4.29348 9.99992 4.29348Z"></path><path fill="currentColor" d="M16.4673 4.4837C16.4673 5.00896 16.0415 5.43478 15.5162 5.43478C14.991 5.43478 14.5652 5.00896 14.5652 4.4837C14.5652 3.95843 14.991 3.53261 15.5162 3.53261C16.0415 3.53261 16.4673 3.95843 16.4673 4.4837Z"></path><path fill="currentColor" d="M17.7989 10.9511C18.3241 10.9511 18.75 10.5253 18.75 10C18.75 9.47474 18.3241 9.04891 17.7989 9.04891C17.2736 9.04891 16.8478 9.47474 16.8478 10C16.8478 10.5253 17.2736 10.9511 17.7989 10.9511Z"></path><path fill="currentColor" d="M16.4673 15.5163C16.4673 16.0416 16.0415 16.4674 15.5162 16.4674C14.991 16.4674 14.5652 16.0416 14.5652 15.5163C14.5652 14.991 14.991 14.5652 15.5162 14.5652C16.0415 14.5652 16.4673 14.991 16.4673 15.5163Z"></path><path fill="currentColor" d="M9.99996 18.75C10.5252 18.75 10.951 18.3242 10.951 17.7989C10.951 17.2736 10.5252 16.8478 9.99996 16.8478C9.47469 16.8478 9.04887 17.2736 9.04887 17.7989C9.04887 18.3242 9.47469 18.75 9.99996 18.75Z"></path><path fill="currentColor" d="M5.43469 15.5163C5.43469 16.0416 5.00887 16.4674 4.4836 16.4674C3.95833 16.4674 3.53252 16.0416 3.53252 15.5163C3.53252 14.991 3.95833 14.5652 4.4836 14.5652C5.00887 14.5652 5.43469 14.991 5.43469 15.5163Z"></path><path fill="currentColor" d="M2.20096 10.9511C2.72623 10.9511 3.15205 10.5253 3.15205 10C3.15205 9.47474 2.72623 9.04891 2.20096 9.04891C1.67569 9.04891 1.24988 9.47474 1.24988 10C1.24988 10.5253 1.67569 10.9511 2.20096 10.9511Z"></path><path fill="currentColor" d="M5.43469 4.4837C5.43469 5.00896 5.00887 5.43478 4.4836 5.43478C3.95833 5.43478 3.53252 5.00896 3.53252 4.4837C3.53252 3.95843 3.95833 3.53261 4.4836 3.53261C5.00887 3.53261 5.43469 3.95843 5.43469 4.4837Z"></path></svg></div><div class="item" data-v-9c96f2c4><svg width="20" height="20" viewbox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon dark" data-v-9c96f2c4><path fill="currentColor" d="M9.99993 3.12494C6.20294 3.12494 3.12488 6.203 3.12488 10C3.12488 13.797 6.20294 16.8751 9.99993 16.8751C13.7969 16.8751 16.875 13.797 16.875 10C16.875 9.52352 16.8264 9.0577 16.7337 8.6075C16.6752 8.32295 16.4282 8.11628 16.1378 8.10872C15.8474 8.10117 15.5901 8.29473 15.5168 8.57585C15.1411 10.0167 13.8302 11.0795 12.2727 11.0795C10.4212 11.0795 8.92039 9.57869 8.92039 7.72726C8.92039 6.16969 9.98319 4.85879 11.4241 4.48312C11.7052 4.40983 11.8988 4.15249 11.8912 3.86207C11.8836 3.57165 11.677 3.32473 11.3924 3.26616C10.9422 3.1735 10.4764 3.12494 9.99993 3.12494Z"></path></svg></div></div></header><main data-v-1fe50f87><div class="container" data-v-1fe50f87><div class="layout-content" id="layout-content" data-v-1fe50f87 data-v-2dc36421><div class="layout-doc" data-v-2dc36421><div style="position:relative;"><div><p>第 4~8 节，介绍了</p><ol><li>flex 子元素的伸缩原理</li><li>flex 属性(flex-grow, flex-shrink, flex-basis)</li><li>元素初始尺寸的计算方式</li></ol><h2 id="参考内容" tabindex="-1">参考内容 <a class="header-anchor" href="#参考内容" aria-hidden="true">#</a></h2><p><a href="https://juejin.cn/book/7161370789680250917" target="_blank" rel="noreferrer">稀土掘金——现代 Web 布局</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Flexible_Box_Layout/Controlling_Ratios_of_Flex_Items_Along_the_Main_Ax" target="_blank" rel="noreferrer">MDN——控制 Flex 子元素在主轴上的比例</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/flex-basis" target="_blank" rel="noreferrer">MDN——flex-basis</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/flex-grow" target="_blank" rel="noreferrer">MDN——flex-grow</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/flex-shrink" target="_blank" rel="noreferrer">MDN——flex-shrink</a></p><h2 id="flex-子元素在主轴上的伸缩" tabindex="-1">flex 子元素在主轴上的伸缩 <a class="header-anchor" href="#flex-子元素在主轴上的伸缩" aria-hidden="true">#</a></h2><p>flex 布局的精髓，就在于它能够控制子元素在主轴上的尺寸和伸缩性。（所以被称为弹性布局）</p><p>这个伸缩性使用 <code>flex-grow</code>, <code>flex-shrink</code> 和 <code>flex-basis</code> 来控制。</p><p>而这三个属性，通常合写为 <code>flex</code> 属性。</p><h3 id="基础概念" tabindex="-1">基础概念 <a class="header-anchor" href="#基础概念" aria-hidden="true">#</a></h3><h4 id="正负自由空间-或可用空间-positive-and-negative-free-space" tabindex="-1">正负自由空间（或可用空间, positive and negative free space） <a class="header-anchor" href="#正负自由空间-或可用空间-positive-and-negative-free-space" aria-hidden="true">#</a></h4><p>flex 子元素的伸缩，本质上是对 flex 容器正负自由空间的分配。</p><p>自由空间的计算如图所示：</p><p><img src="https://s2.loli.net/2022/12/09/3CkRxIDefuKsyU8.jpg" alt="positive free space"></p><p>上图计算出的自由空间是正数，即 正自由空间。</p><p><img src="https://s2.loli.net/2022/12/09/4YhbTaj38yFt7oV.jpg" alt="negative free space"></p><p>以此类推，也会出现 负自由空间，计算方式也是一样的。</p><blockquote><p>注：上图漏掉了 <code>gap</code> 属性，计算自由空间时也要减去 flex 子元素之间的 <code>gap</code> 宽度。</p></blockquote><h3 id="flex-basis-属性" tabindex="-1">flex-basis 属性 <a class="header-anchor" href="#flex-basis-属性" aria-hidden="true">#</a></h3><p><code>flex-basis</code> 属性对 flexbox 中，对 Flex 子元素尺寸起 <strong>决定性</strong> 的作用。</p><p>它可以<strong>在任何空间分配之前</strong>，初始化 flex 子元素的尺寸。</p><blockquote><p><code>flex-basis</code> 比 <code>height</code> 和 <code>width</code> 具有更高的优先级。（除了值为 <code>auto</code> 时）</p></blockquote><p>它有几个需要注意的值：</p><h4 id="flex-basis-auto-默认值" tabindex="-1"><code>flex-basis: auto</code>（默认值） <a class="header-anchor" href="#flex-basis-auto-默认值" aria-hidden="true">#</a></h4><ul><li><p>如果为子元素设置了绝对值（如 <code>width: 200px</code>），那么 <code>flex-basis</code> 的值就为绝对值；</p></li><li><p>如果未设置绝对值，那么 <code>flex-basis</code> 的值为 <code>max-content</code>；</p></li></ul><h4 id="flex-basis-content" tabindex="-1"><code>flex-basis: content</code> <a class="header-anchor" href="#flex-basis-content" aria-hidden="true">#</a></h4><ul><li><p>无论有没有设置绝对值，它都以子元素内容大小为准。</p><p>（但是支持的浏览器较少，可以把 <code>height</code> 和 <code>width</code> 设为 <code>auto</code> 来达成同样的效果。）</p></li></ul><h4 id="flex-basis-0" tabindex="-1"><code>flex-basis: 0</code> <a class="header-anchor" href="#flex-basis-0" aria-hidden="true">#</a></h4><ul><li>意味着完全忽略 flex 子元素的尺寸，它的所有空间都可以被抢占。</li></ul><h3 id="flex-grow-属性" tabindex="-1">flex-grow 属性 <a class="header-anchor" href="#flex-grow-属性" aria-hidden="true">#</a></h3><p>指定了 flex <strong>增长值</strong>，决定了当 正自由空间 分配时，flex 子元素相对于它的兄弟元素的增长程度。</p><h3 id="flex-shrink-属性" tabindex="-1">flex-shrink 属性 <a class="header-anchor" href="#flex-shrink-属性" aria-hidden="true">#</a></h3><p>指定了 flex <strong>缩小值</strong>，决定了当 负自由空间 分配时，flex 子元素相对于它的兄弟元素的收缩程度。</p><p>看起来和 <code>flex-grow</code> 简直一模一样，那么为什么不把这两个属性合并起来呢？</p><p>因为 <code>flex-shrink</code> 有个特点：在缩小时 flexbox 会阻止子元素的尺寸缩小到 0，最小只到 <code>min-content</code>。</p><h3 id="flex-属性" tabindex="-1">flex 属性 <a class="header-anchor" href="#flex-属性" aria-hidden="true">#</a></h3><p><code>flex-grow</code>, <code>flex-shrink</code>, <code>flex-basis</code> 三个属性的简写。</p><p>下面来整理一下它常用的几种值：</p><h4 id="flex-initial-flex-0-1-auto-默认值" tabindex="-1"><code>flex:initial</code> (<code>flex: 0 1 auto</code>) (默认值) <a class="header-anchor" href="#flex-initial-flex-0-1-auto-默认值" aria-hidden="true">#</a></h4><p><img src="https://s2.loli.net/2022/12/09/mLeYsU48VZ9pTuk.webp" alt="flex: initial"></p><p>子元素不会成长，只会收缩。</p><h4 id="flex-auto-flex-1-1-auto" tabindex="-1"><code>flex: auto</code> (<code>flex: 1 1 auto</code>) <a class="header-anchor" href="#flex-auto-flex-1-1-auto" aria-hidden="true">#</a></h4><p><img src="https://s2.loli.net/2022/12/09/TSxHyDf6dRmZ2iA.webp" alt="flex: auto"></p><p>所有子元素均为弹性的，它们将均分正负自由空间（但不意味着均分后它们等宽）</p><h4 id="flex-1-flex-1-1-0" tabindex="-1"><code>flex: 1</code> (<code>flex: 1 1 0</code>) <a class="header-anchor" href="#flex-1-flex-1-1-0" aria-hidden="true">#</a></h4><p><img src="https://s2.loli.net/2022/12/09/9zcTv2BZKHJNp1g.webp" alt="flex: 1"></p><p>让每一个子元素变成弹性的，并且忽略自身基础尺寸，来让所有子元素等尺寸。</p><p>但是实际上上图的第一个子元素 &quot;Alonglonglongword&quot; 还是要更长一点。</p><p>需要为它设置 <code>min-width: 0</code> 才能正真均分，原因在<a href="#%E5%85%B3%E4%BA%8E-min-width-0-%E7%9A%84%E6%84%8F%E4%B9%89">文末</a>解释。</p><h4 id="flex-none-flex-0-0-auto" tabindex="-1"><code>flex: none</code> (<code>flex: 0 0 auto</code>) <a class="header-anchor" href="#flex-none-flex-0-0-auto" aria-hidden="true">#</a></h4><p><img src="https://s2.loli.net/2022/12/09/jnJHGpS6ClhY1VX.webp" alt="flex: none"></p><p>相当于消除子元素的弹性。</p><h4 id="flex-positive-number-flex-basis-positive-number" tabindex="-1"><code>flex: &lt;positive-number&gt;</code> (<code>flex-basis: &lt;positive-number&gt;</code>) <a class="header-anchor" href="#flex-positive-number-flex-basis-positive-number" aria-hidden="true">#</a></h4><p>为它设定一个带单位的绝对值，相当于在设置 <code>flex-basis</code>。</p><h3 id="子元素的初始尺寸-是如何计算出来的" tabindex="-1">子元素的初始尺寸，是如何计算出来的？ <a class="header-anchor" href="#子元素的初始尺寸-是如何计算出来的" aria-hidden="true">#</a></h3><h4 id="第一步-计算-flex-basis-的值" tabindex="-1">第一步：计算 <code>flex-basis</code> 的值 <a class="header-anchor" href="#第一步-计算-flex-basis-的值" aria-hidden="true">#</a></h4><blockquote><p>content → width → flex-basis</p></blockquote><p>含义是：</p><ol><li><p>如果 flex 子元素未指定 <code>flex-basis</code> 的值，那么去参考 <code>width</code> 属性；</p></li><li><p>如果 flex 子元素连 <code>width</code> 都未指定，那么去参考 <code>content(内容计算宽度)</code>。</p></li></ol><h4 id="第二步-考虑-min-和-max-的影响" tabindex="-1">第二步：考虑 <code>min-*</code> 和 <code>max-*</code> 的影响 <a class="header-anchor" href="#第二步-考虑-min-和-max-的影响" aria-hidden="true">#</a></h4><p>参考以下逻辑：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> size </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 尺寸初始值</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (basis </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> min) size </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> min</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 最小值</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (basis </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> max) size </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> max</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 最大值</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (min </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> max) size </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> min</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 当大小冲突，min 的权重高于 max</span></span>
<span class="line"></span></code></pre></div><h3 id="关于-min-width-0-的意义" tabindex="-1">关于 <code>min-width: 0</code> 的意义 <a class="header-anchor" href="#关于-min-width-0-的意义" aria-hidden="true">#</a></h3><p><a href="#flex-1-flex-1-1-0">上文</a>设置 <code>flex-basis: 0</code> 后，初始化尺寸不为 0 的原因，在这里可以解释了。</p><p>W3C 中规定：</p><blockquote><p>主轴上 flex 子元素设置 <code>overflow: visible</code> 时，<strong>若 flex 子元素未设置最小尺寸 (min-size)，将会指定为一个自动的最小尺寸 (min-content)</strong>。</p></blockquote><p>这就导致 <code>flex-basis: 0</code> 被 <code>min-content</code> 覆盖。</p><p>因此，在需要<strong>子元素初始尺寸为 0 时，最好同时设置 <code>flex-basis: 0</code> 和 <code>min-width: 0</code></strong>。</p></div></div></div></div></div></main></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"page.md\":\"adc53c4f\",\"posts_tech_《现代web布局》其一：布局及 flex 基础.md\":\"2679109a\",\"posts_phl_《牛津通识读本——康德》.md\":\"8128a5fe\",\"posts_tech_《现代web布局》其七：grid 经典布局.md\":\"881293f7\",\"index.md\":\"21bab293\",\"posts_tech_css动画学习02：页面滚动贴合.md\":\"343cc523\",\"posts_tech_css动画学习04：发光渐变按钮.md\":\"ed1bd2b6\",\"doc.md\":\"a09ada22\",\"nolayout.md\":\"51d36d23\",\"posts_anime_论不放飞自我的扳机社，上限有多高？——《赛博朋克：边缘行者》.md\":\"f1a6370d\",\"posts_tech_vue3 开发利器——unplugin-auto-import.md\":\"26e16b54\",\"posts_tech_《javascript基础语法详解》.md\":\"1677e39f\",\"posts_tech_css动画学习01：3d计数器.md\":\"684cfd37\",\"posts_tech_《编码——隐匿在计算机软硬件背后的语言》.md\":\"e7dd49d1\",\"posts_tech_《现代web布局》其三：flex 经典布局.md\":\"65628de3\",\"posts_tech_《现代web布局》其五：grid 定位、计算及对齐.md\":\"9add44cf\",\"posts_tech_了解一下eslint.md\":\"3a0fe040\",\"posts_tech_stylelint——css也要规范化.md\":\"215ed955\",\"posts_tech_《现代web布局》其四：grid 布局基础.md\":\"da8bb54b\",\"posts_tech_整理一点常用的正则表达式.md\":\"de295a8b\",\"posts_tech_《现代web布局》其八：grid 创意布局.md\":\"16c20761\",\"posts_tech_css动画学习03：卫星环绕loading.md\":\"40399d78\",\"posts_video_《davinci resolve 17 初学者指南》.md\":\"2822ca1d\",\"posts_tech_《现代web布局》其二：flex 弹性详解.md\":\"b80a0fdc\",\"posts_tech_《现代web布局》其六：子网格.md\":\"df010f9f\",\"posts_tech_《跟wakaba酱一起学git使用》.md\":\"f2e34861\",\"posts_tech_理解 css 的内在尺寸.md\":\"2d207ad4\"}")</script>
    <script type="module" async src="/assets/app.4b9a283d.js"></script>
    
  </body>
</html>